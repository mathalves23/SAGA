import{r as t,j as e,L as F}from"./index-B8o203Dy.js";import{e as O,a as j,P as V,b as B}from"./exerciseImageService-CDyWT-ez.js";import{Z as _}from"./zap-ChpLmj14.js";import{P as L}from"./plus-BvqSwT8Z.js";import{S as q}from"./search-CYeq_7vy.js";import{H as M}from"./heart-CSJWhyhy.js";import{D as v}from"./dumbbell-DtL6o3GP.js";import{T as Z}from"./target-gy6unRp3.js";import{c as H}from"./createLucideIcon-6V63RTku.js";import"./api-Bn9k31HA.js";/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],K=H("eye",J),Q=()=>{const[a,i]=t.useState(new Set),d=t.useRef(new Map),p=t.useCallback((g,c)=>{if(a.has(g))return;const u=new Image;u.onload=()=>{i(l=>new Set([...l,g])),d.current.set(c,u)},u.src=g},[a]),m=t.useCallback(g=>a.has(g),[a]);return{loadImage:p,isImageLoaded:m}},W=({src:a,alt:i,className:d,placeholder:p,onLoad:m,exerciseId:g})=>{const[c,u]=t.useState(!1),[l,h]=t.useState(!1),[f,b]=t.useState(!1),s=t.useRef(null);return t.useEffect(()=>{const x=new IntersectionObserver(([N])=>{N.isIntersecting&&(b(!0),x.disconnect())},{threshold:.1});return s.current&&x.observe(s.current),()=>x.disconnect()},[]),e.jsxs("div",{ref:s,className:`relative ${d}`,children:[!c&&!l&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-400 to-pink-400 animate-pulse flex items-center justify-center",children:p||e.jsx(v,{className:"w-8 h-8 text-white/60"})}),f&&e.jsx("img",{src:a,alt:i,className:`transition-all duration-500 ${c?"opacity-100":"opacity-0"} ${d}`,onLoad:()=>{u(!0),m?.()},onError:()=>h(!0),loading:"lazy"}),l&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-400 to-gray-500 flex items-center justify-center",children:e.jsx(v,{className:"w-8 h-8 text-white/60"})})]})},X=({exercise:a,isHovered:i,onHover:d,onFavorite:p,isFavorite:m})=>{const[g,c]=t.useState(!1),[u,l]=t.useState(!1),h=t.useCallback(()=>{if(!a.imageUrl&&!a.animationUrl){const s=j.getExerciseImages(a.name);return i?s.animated:s.static}return i&&a.animationUrl?a.animationUrl:a.imageUrl||a.animationUrl||null},[i,a.imageUrl,a.animationUrl,a.name]),f=t.useMemo(()=>{if(a.animationUrl&&a.animationUrl!==a.imageUrl)return!0;if(!a.imageUrl&&!a.animationUrl){const s=j.getExerciseImages(a.name);return s.static!==s.animated}return!1},[a.animationUrl,a.imageUrl,a.name]),b=s=>{switch(s){case"Iniciante":return"text-green-600 bg-green-100 dark:bg-green-900/30 dark:text-green-400";case"Intermediário":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/30 dark:text-yellow-400";case"Avançado":return"text-red-600 bg-red-100 dark:bg-red-900/30 dark:text-red-400";default:return"text-gray-600 bg-gray-100 dark:bg-gray-800 dark:text-gray-400"}};return e.jsxs("div",{className:`group relative bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 
                 dark:border-gray-700 overflow-hidden transition-all duration-500 hover:shadow-xl 
                 hover:shadow-purple-500/10 hover:-translate-y-2 ${i?"scale-105 z-10":""}`,onMouseEnter:()=>d(a.id),onMouseLeave:()=>d(null),children:[e.jsx("button",{onClick:s=>{s.stopPropagation(),p(a.id)},className:`absolute top-3 right-3 z-20 p-2 rounded-full backdrop-blur-sm transition-all duration-300
                   ${m?"bg-red-500/90 text-white shadow-lg scale-110":"bg-black/20 text-white/80 hover:bg-red-500/70 hover:text-white"}`,children:e.jsx(M,{className:`w-4 h-4 ${m?"fill-current":""}`})}),e.jsx("div",{className:"relative h-48 overflow-hidden bg-gradient-to-br from-purple-500 to-pink-500",children:h()?e.jsxs(e.Fragment,{children:[e.jsx(W,{src:h(),alt:a.name,className:"w-full h-full object-cover transition-all duration-700 group-hover:scale-110",exerciseId:a.id.toString(),onLoad:()=>c(!0)}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),f&&e.jsx("div",{className:`absolute top-3 left-3 bg-black/60 backdrop-blur-sm rounded-full p-2 
                             transition-all duration-300 ${i?"bg-green-500/80 scale-110":""}`,children:i?e.jsx(V,{className:"w-4 h-4 text-white"}):e.jsx(B,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"absolute bottom-3 left-3 flex gap-1",children:[a.imageUrl&&e.jsx("span",{className:"text-blue-400 text-xs bg-blue-500/20 backdrop-blur-sm px-2 py-1 rounded-full border border-blue-400/30",children:"IMG"}),a.animationUrl&&e.jsx("span",{className:"text-green-400 text-xs bg-green-500/20 backdrop-blur-sm px-2 py-1 rounded-full border border-green-400/30",children:"GIF"}),a.videoUrl&&e.jsx("span",{className:"text-red-400 text-xs bg-red-500/20 backdrop-blur-sm px-2 py-1 rounded-full border border-red-400/30",children:"VID"})]}),a.originalName&&a.originalName!==a.name&&e.jsx("div",{className:"absolute bottom-3 right-3 bg-black/70 backdrop-blur-sm text-white text-xs px-2 py-1 rounded-full",children:a.originalName})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center text-white/80 h-full",children:[e.jsx(v,{className:"w-16 h-16 mb-2 animate-pulse"}),e.jsx("span",{className:"text-sm",children:"Sem imagem"})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white line-clamp-2 leading-tight",children:a.name}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap ml-2 ${b(a.difficultyLevelName||"Intermediário")}`,children:a.difficultyLevelName||"Intermediário"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4 line-clamp-2 leading-relaxed",children:a.description||"Descrição não disponível"}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[e.jsx(Z,{className:"w-3 h-3"}),"Músculo:"]}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:a.primaryMuscleGroupName||"N/A"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[e.jsx(v,{className:"w-3 h-3"}),"Equipamento:"]}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:a.equipmentName||"N/A"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(F,{to:`/exercises/${a.id}`,className:`flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 
                     text-white py-3 px-4 rounded-xl font-semibold transition-all duration-300 
                     hover:shadow-lg hover:shadow-purple-500/25 flex items-center justify-center gap-2`,children:[e.jsx(K,{className:"w-4 h-4"}),"Ver Detalhes"]}),e.jsx("button",{className:`px-4 py-3 border-2 border-gray-200 dark:border-gray-600 rounded-xl 
                           text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 
                           transition-all duration-300 hover:border-purple-400 hover:shadow-md`,children:e.jsx(L,{className:"w-4 h-4"})})]}),u&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 animate-in slide-in-from-top duration-300",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Instruções:"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:a.instructions?.split(`
`).map((s,x)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("span",{className:"text-purple-600 font-semibold min-w-[1rem]",children:[x+1,"."]}),e.jsx("span",{children:s.replace(/^\d+\.\s*/,"")})]},x))||e.jsx("p",{children:"Instruções não disponíveis"})})]})]})]})},de=()=>{const[a,i]=t.useState(""),[d,p]=t.useState("all"),[m,g]=t.useState("all"),[c,u]=t.useState("all"),[l,h]=t.useState([]),[f,b]=t.useState(!0),[s,x]=t.useState(null),[N,U]=t.useState(null),[E,D]=t.useState(new Set),[w,C]=t.useState("grid"),[k,A]=t.useState("name"),{loadImage:S}=Q();t.useEffect(()=>{(async()=>{try{b(!0);const o=await O.getAll();h(o),x(null),o.slice(0,8).forEach(n=>{if(n.imageUrl)S(n.imageUrl,n.id.toString());else{const y=j.getExerciseImages(n.name);S(y.static,n.id.toString()+"_static")}}),setTimeout(()=>{j.preloadExerciseImages(["Supino Reto","Agachamento","Pull-up","Desenvolvimento Militar","Rosca Direta","Abdominal","Levantamento Terra","Remada Curvada"])},1e3)}catch(o){console.error("Erro ao carregar exercícios:",o),x("Erro ao carregar exercícios")}finally{b(!1)}})()},[S]);const $=t.useMemo(()=>["all",...Array.from(new Set(l.map(r=>r.primaryMuscleGroupName||"Outros")))],[l]);t.useMemo(()=>["all",...Array.from(new Set(l.map(r=>r.primaryMuscleGroupName||"Outros")))],[l]);const G=t.useMemo(()=>["all",...Array.from(new Set(l.map(r=>r.difficultyLevelName||"Intermediário")))],[l]),I=t.useMemo(()=>{const r=l.filter(o=>{const n=o.name.toLowerCase().includes(a.toLowerCase())||o.description?.toLowerCase().includes(a.toLowerCase()),y=d==="all"||o.primaryMuscleGroupName===d,P=m==="all"||o.primaryMuscleGroupName===m,R=c==="all"||o.difficultyLevelName===c;return n&&y&&P&&R});return r.sort((o,n)=>{switch(k){case"name":return o.name.localeCompare(n.name);case"difficulty":const y={Iniciante:1,Intermediário:2,Avançado:3};return(y[o.difficultyLevelName]||2)-(y[n.difficultyLevelName]||2);case"muscle":return(o.primaryMuscleGroupName||"").localeCompare(n.primaryMuscleGroupName||"");default:return 0}}),r},[l,a,d,m,c,k]),T=t.useCallback(r=>{D(o=>{const n=new Set(o);return n.has(r)?n.delete(r):n.add(r),n})},[]),z=t.useCallback(r=>{U(r)},[]);return f?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative w-16 h-16 mx-auto mb-4",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-purple-200 dark:border-purple-800"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-purple-600 border-t-transparent animate-spin"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:"Carregando exercícios..."})]})}):s?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(_,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Oops! Algo deu errado"}),e.jsx("p",{className:"text-red-600 dark:text-red-400 mb-4",children:s}),e.jsx("button",{onClick:()=>window.location.reload(),className:`bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 
                     text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 
                     hover:shadow-lg hover:shadow-purple-500/25`,children:"Tentar Novamente"})]})}):e.jsxs("div",{className:"space-y-8 pb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Biblioteca de Exercícios"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-2 text-lg",children:["Explore ",l.length," exercícios com demonstrações visuais incríveis"]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{className:`bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 
                           text-white px-6 py-3 rounded-xl flex items-center gap-2 font-semibold
                           transition-all duration-300 hover:shadow-lg hover:shadow-purple-500/25`,children:[e.jsx(L,{className:"w-5 h-5"}),"Novo Exercício"]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"w-5 h-5 absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar exercícios por nome ou descrição...",value:a,onChange:r=>i(r.target.value),className:`w-full pl-12 pr-4 py-4 border border-gray-300 dark:border-gray-600 rounded-xl 
                       bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-lg
                       focus:ring-2 focus:ring-purple-500 focus:border-transparent
                       transition-all duration-300`})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Categoria"}),e.jsxs("select",{value:d,onChange:r=>p(r.target.value),className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg 
                         bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                         focus:ring-2 focus:ring-purple-500 focus:border-transparent`,children:[e.jsx("option",{value:"all",children:"Todas as Categorias"}),$.slice(1).map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Dificuldade"}),e.jsxs("select",{value:c,onChange:r=>u(r.target.value),className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg 
                         bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                         focus:ring-2 focus:ring-purple-500 focus:border-transparent`,children:[e.jsx("option",{value:"all",children:"Todas as Dificuldades"}),G.slice(1).map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Ordenar por"}),e.jsxs("select",{value:k,onChange:r=>A(r.target.value),className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg 
                         bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                         focus:ring-2 focus:ring-purple-500 focus:border-transparent`,children:[e.jsx("option",{value:"name",children:"Nome"}),e.jsx("option",{value:"difficulty",children:"Dificuldade"}),e.jsx("option",{value:"muscle",children:"Músculo"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Visualização"}),e.jsxs("div",{className:"flex rounded-lg border border-gray-300 dark:border-gray-600 overflow-hidden",children:[e.jsx("button",{onClick:()=>C("grid"),className:`flex-1 py-2 px-3 text-sm font-medium transition-all duration-200 ${w==="grid"?"bg-purple-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:"Grade"}),e.jsx("button",{onClick:()=>C("list"),className:`flex-1 py-2 px-3 text-sm font-medium transition-all duration-200 ${w==="list"?"bg-purple-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:"Lista"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Mostrando ",e.jsx("span",{className:"font-semibold text-purple-600",children:I.length})," de"," ",e.jsx("span",{className:"font-semibold",children:l.length})," exercícios"]}),e.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"w-4 h-4 text-red-500"}),e.jsxs("span",{children:[E.size," favoritos"]})]})})]})]})}),e.jsx("div",{className:`grid gap-6 ${w==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"}`,children:I.map(r=>e.jsx(X,{exercise:r,isHovered:N===r.id,onHover:z,onFavorite:T,isFavorite:E.has(r.id)},r.id))}),I.length===0&&!f&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(v,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:"Nenhum exercício encontrado"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg mb-6 max-w-md mx-auto",children:"Tente ajustar os filtros ou termo de busca para encontrar o exercício perfeito"}),e.jsx("button",{onClick:()=>{i(""),p("all"),g("all"),u("all")},className:`bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 
                     text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 
                     hover:shadow-lg hover:shadow-purple-500/25`,children:"Limpar Filtros"})]})]})};export{de as default};
